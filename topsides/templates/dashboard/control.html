<html>
    <head>
        <link href="static/css/dashboard/control.css" rel="stylesheet" type="text/css"/>
        <title>Eastern Edge - Control Options</title>

        <script>
            $dash.pageLoad(function(){
                runPythonGET("dashboard/getmenujson", null, function(data){
                    $.each(data['control-links'], function(i, link){
                        $(".grid").append("<div class='grid-item'><div class='item-content panel'><h2>" + link.name + "</h2><button class='btn btn-primary' onclick='openPage(" + link.outside_dashboard + "," + '"' + link.file_name + '"' +")'>Open</button></div></div>");
                    });

                    $(".grid").masonry({
                        itemSelector: ".grid-item",
                        // columnWidth: ".grid-sizer",
                        percentPosition: true
                    });

                    setTimeout(function(){
                        $(".grid-item.init").toggleClass("init", false);
                    }, 1000);
                });
            });


            function openPage(external, link) {
                if (external) {
                    window.location.href = "dashboard/ext?name=" + link
                } else {
                    $dash.navigate(link);
                }
            }
    </script>
</head>

<body>
    <div class="grid">

    </div>
</body>

</html>